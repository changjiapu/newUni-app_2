(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addProduct/addProduct"],{"266a":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品名称:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.productName,expression:"productName"}],attrs:{type:"text",placeholder:"请输入商品名称",eventid:"10a01032-0"},domProps:{value:t.productName},on:{input:function(e){e.target.composing||(t.productName=e.target.value)}}})]),i("view",{staticClass:"addimg"},[t._m(0),t._l(t.imglist,function(e,s){return 0!==t.imglist.length?i("image",{key:s,attrs:{src:e}}):t._e()}),t.imglist.length<5?i("image",{attrs:{src:"../../static/tupiantianjia_03.png",mode:"",eventid:"10a01032-1"},on:{click:function(e){t.paizhao()}}}):t._e()],2),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品价格:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"text",placeholder:"请输入商品名称",eventid:"10a01032-2"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),i("view",{staticClass:"radio"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("配送方式")]),i("view",{staticClass:"msg"},[0==t.expressId?i("image",{attrs:{src:"../../static/mianfeipeisong_07.png",mode:"",eventid:"10a01032-3"},on:{click:function(e){t.radio1Change()}}}):t._e(),1==t.expressId?i("image",{attrs:{src:"../../static/ziti_09.png",mode:"",eventid:"10a01032-4"},on:{click:function(e){t.radio1Change()}}}):t._e(),i("text",[t._v("免费配送")]),1==t.expressId?i("image",{attrs:{src:"../../static/mianfeipeisong_07.png",mode:"",eventid:"10a01032-5"},on:{click:function(e){t.radio1Change()}}}):t._e(),0==t.expressId?i("image",{attrs:{src:"../../static/ziti_09.png",mode:"",eventid:"10a01032-6"},on:{click:function(e){t.radio1Change()}}}):t._e(),i("text",[t._v("自提")])])]),i("view",{staticClass:"shuxing"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品属性")]),t.categoryName?i("text",[t._v(t._s(t.categoryName))]):t._e(),i("image",{attrs:{src:"../../static/shangpinshuxing_14.png",mode:"",eventid:"10a01032-7"},on:{click:function(e){t.ishowChange()}}})]),i("view",{staticClass:"shuxing"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品规格")]),i("image",{attrs:{src:"../../static/shangpinshuxing_14.png",mode:"",eventid:"10a01032-8"},on:{click:function(e){t.addGuige()}}})]),t._l(t.guigeList,function(e,s){return i("view",{key:s,staticClass:"guigeList"},[i("text",[t._v(t._s(s+1)+"规格名称:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.productSpecs,expression:"item.productSpecs"}],attrs:{type:"text",placeholder:"请输入名称",eventid:"10a01032-9-"+s},domProps:{value:e.productSpecs},on:{input:function(t){t.target.composing||(e.productSpecs=t.target.value)}}}),i("text",[t._v("价格:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],attrs:{type:"number",placeholder:"请输入价格",eventid:"10a01032-10-"+s},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}})])}),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品单位:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.specUnit,expression:"specUnit"}],attrs:{type:"text",placeholder:"计算单位/斤/个/只/件...",eventid:"10a01032-11"},domProps:{value:t.specUnit},on:{input:function(e){e.target.composing||(t.specUnit=e.target.value)}}})]),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品数量:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.sellCount,expression:"sellCount"}],attrs:{type:"number",placeholder:"商品库存数量",eventid:"10a01032-12"},domProps:{value:t.sellCount},on:{input:function(e){e.target.composing||(t.sellCount=e.target.value)}}})]),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品描述:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.descript,expression:"descript"}],attrs:{type:"text",placeholder:"请输入商品描述",eventid:"10a01032-13"},domProps:{value:t.descript},on:{input:function(e){e.target.composing||(t.descript=e.target.value)}}})]),t.isShowshangj?i("view",{staticClass:"btn"},[t.productId?t._e():i("text",{attrs:{eventid:"10a01032-14"},on:{click:function(e){t.AddProduct()}}},[t._v("立即上架")]),t.productId?i("text",{attrs:{eventid:"10a01032-15"},on:{click:function(e){t.AddProduct2()}}},[t._v("立即修改")]):t._e()]):i("view",{staticClass:"btn_2"},[t.productId?t._e():i("text",[t._v("立即上架")]),t.productId?i("text",[t._v("立即修改")]):t._e()]),t.isshow?i("view",{staticClass:"bottomWindow"},[i("view",{staticClass:"content"},[i("text",[t._v("商品分类")]),i("view",{staticClass:"guige2"},t._l(t.categoryList,function(e,s){return i("text",{key:s,class:{active:t.currentTabs==s},attrs:{eventid:"10a01032-16-"+s},on:{click:function(i){t.categoryChange(s,e.categoryId,e.categoryName)}}},[t._v(t._s(e.categoryName))])})),i("view",{staticClass:"btn2",attrs:{eventid:"10a01032-17"},on:{click:function(e){t.isOk()}}},[t._v("完成")])])]):t._e()],2)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"title"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品图片:")]),i("text",[t._v("请上传商品图片")])])}];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},9143:function(t,e,i){},abea:function(t,e,i){"use strict";i.r(e);var s=i("d364"),a=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);e["default"]=a.a},baac:function(t,e,i){"use strict";i("0cb7");var s=o(i("b0ce")),a=o(i("f1f2"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))},cbbf:function(t,e,i){"use strict";var s=i("9143"),a=i.n(s);a.a},d364:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("2f62"),a=i("a021"),o=i("b607");function n(t){return d(t)||r(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){l(t,e,i[e])})}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p={data:function(){return{isShowshangj:!0,isshowBtn:!0,categoryName:"",currentTabs:-1,categoryList:[],productName:"",categoryId:"",descript:"",productImage:[],price:"",sellCount:"",specUnit:"",expressId:0,guigeList:[{productSpecs:"",price:"",specForm:1}],imglist:[],radio2:1,isshow:!1,productId:""}},onLoad:function(t){t.id&&(this.productId=t.id,this.getShopProductById(t.id)),this.getProductCategory(1,1)},computed:u({},(0,s.mapState)(["userId","shopId"])),methods:{getShopProductById:function(t){var e=this;(0,o.getShopProductById)(t).then(function(t){if(0==t.data.code){var i=[],s=!0,a=!1,o=void 0;try{for(var n,c=t.data.data.specList[Symbol.iterator]();!(s=(n=c.next()).done);s=!0){var r=n.value,d={productSpecs:r.productSpecs,price:r.price,specForm:1};i.push(d)}}catch(u){a=!0,o=u}finally{try{s||null==c.return||c.return()}finally{if(a)throw o}}e.guigeList=i,e.price=t.data.data.price,e.productName=t.data.data.productName,e.descript=t.data.data.descript,e.categoryId=t.data.data.categoryId,e.sellCount=t.data.data.sellCount,e.specUnit=t.data.data.specUnit,e.expressId=t.data.data.expressId}})},categoryChange:function(t,e,i){this.currentTabs=t,this.categoryId=e,this.categoryName=i},getProductCategory:function(t,e){var i=this;(0,o.getProductCategory)(t,e).then(function(t){0==t.data.code&&(i.categoryList=t.data.data.cateGories)})},AddProduct:function(){if(this.productName)if(0!=this.productImage.length)if(this.price)if(this.categoryId){for(var e=0;e<this.guigeList.length;e++)""==this.guigeList[e].productSpecs&&this.guigeList.splice(e);if(0!=this.guigeList.length)if(this.specUnit)if(this.sellCount)if(this.descript){var i={userId:this.userId,shopId:this.shopId,productName:this.productName,categoryId:this.categoryId,sellCount:this.sellCount,price:this.price,productImage:this.productImage.join(","),descript:this.descript,specUnit:this.specUnit,expressId:this.expressId,productSpecDtoList:this.guigeList};this.isShowshangj=!1,(0,o.addProduct)(i).then(function(e){0==e.data.code&&t.showToast({title:"添加成功"}),setTimeout(function(e){t.navigateBack({delta:1})},2e3)})}else t.showModal({title:"",content:"请输入商品描述",showCancel:!1});else t.showModal({title:"",content:"请输入商品库存",showCancel:!1});else t.showModal({title:"",content:"请输入商品单位",showCancel:!1});else t.showModal({title:"",content:"请至少上传一种商品规格",showCancel:!1})}else t.showModal({title:"",content:"请选择商品分类属性",showCancel:!1});else t.showModal({title:"",content:"请输入商品价格",showCancel:!1});else t.showModal({title:"",content:"请上传商品图片",showCancel:!1});else t.showModal({title:"",content:"请输入商品名",showCancel:!1})},AddProduct2:function(){if(this.productName)if(this.sellCount)if(this.price)if(this.descript)if(this.specUnit)if(this.categoryId)if(0!=this.productImage.length){for(var e=0;e<this.guigeList.length;e++)""==this.guigeList[e].productSpecs&&this.guigeList.splice(e);var i={productId:this.productId,userId:this.userId,shopId:this.shopId,productName:this.productName,categoryId:this.categoryId,sellCount:this.sellCount,price:this.price,productImage:this.productImage.join(","),descript:this.descript,specUnit:this.specUnit,expressId:this.expressId,productSpecDtoList:this.guigeList};this.isShowshangj=!1,(0,o.updProduct)(i).then(function(e){0==e.data.code&&t.showToast({title:"修改成功"}),setTimeout(function(e){t.navigateBack({delta:1})},2e3)})}else t.showModal({title:"",content:"请上传商品图片",showCancel:!1});else t.showModal({title:"",content:"请选择商品分类",showCancel:!1});else t.showModal({title:"",content:"请输入商品单位",showCancel:!1});else t.showModal({title:"",content:"请输入商品描述",showCancel:!1});else t.showModal({title:"",content:"请输入商品价格",showCancel:!1});else t.showModal({title:"",content:"请输入商品库存",showCancel:!1});else t.showModal({title:"",content:"请输入商品名",showCancel:!1})},addGuige:function(){if(!(this.guigeList.length>5)){var t={productSpecs:"",price:"",specForm:1};this.guigeList.push(t)}},paizhao:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){var s;console.log(i),(s=e.imglist).push.apply(s,n(i.tempFilePaths)),t.uploadFile({url:a.baseURL+"/file/upload",filePath:i.tempFilePaths[0],name:"file",formData:{user:"test",file:i.tempFilePaths[0]},success:function(i){var s=JSON.parse(i.data);0==s.code&&(console.log(i),e.productImage.push(s.data),t.showToast({title:"上传成功"}))}})}})},radio1Change:function(){0==this.expressId?this.expressId=1:this.expressId=0},radio2Change:function(){1==this.radio2?this.radio2=2:this.radio2=1},ishowChange:function(){this.isshow=!0},isOk:function(){console.log(888),this.isshow=!1}}};e.default=p}).call(this,i("6e42")["default"])},f1f2:function(t,e,i){"use strict";i.r(e);var s=i("266a"),a=i("abea");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("cbbf");var n=i("2877"),c=Object(n["a"])(a["default"],s["a"],s["b"],!1,null,"73fff5a6",null);e["default"]=c.exports}},[["baac","common/runtime","common/vendor"]]]);