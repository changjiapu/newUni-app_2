(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addProduct/addProduct"],{"733e":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品名称:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.productName,expression:"productName"}],attrs:{type:"text",placeholder:"请输入商品名称",eventid:"10a01032-0"},domProps:{value:t.productName},on:{input:function(e){e.target.composing||(t.productName=e.target.value)}}})]),i("view",{staticClass:"addimg"},[t._m(0),t._l(t.productImage,function(e,a){return 0!==t.productImage.length?i("image",{key:a,attrs:{src:t.imgURl+e,eventid:"10a01032-1-"+a},on:{click:function(e){t.paizhao2(a)}}},[t._v(">")]):t._e()}),t.productImage.length<5?i("image",{attrs:{src:"../../static/tupiantianjia_03.png",mode:"",eventid:"10a01032-2"},on:{click:function(e){t.paizhao()}}}):t._e()],2),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品价格:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"text",placeholder:"请输入商品名称",eventid:"10a01032-3"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),i("view",{staticClass:"radio"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("配送方式")]),i("view",{staticClass:"msg"},[0==t.expressId?i("image",{attrs:{src:"../../static/mianfeipeisong_07.png",mode:"",eventid:"10a01032-4"},on:{click:function(e){t.radio1Change()}}}):t._e(),1==t.expressId?i("image",{attrs:{src:"../../static/ziti_09.png",mode:"",eventid:"10a01032-5"},on:{click:function(e){t.radio1Change()}}}):t._e(),i("text",[t._v("免费配送")]),1==t.expressId?i("image",{attrs:{src:"../../static/mianfeipeisong_07.png",mode:"",eventid:"10a01032-6"},on:{click:function(e){t.radio1Change()}}}):t._e(),0==t.expressId?i("image",{attrs:{src:"../../static/ziti_09.png",mode:"",eventid:"10a01032-7"},on:{click:function(e){t.radio1Change()}}}):t._e(),i("text",[t._v("自提")])])]),i("view",{staticClass:"shuxing"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品属性")]),t.categoryName?i("text",[t._v(t._s(t.categoryName))]):t._e(),i("image",{attrs:{src:"../../static/shangpinshuxing_14.png",mode:"",eventid:"10a01032-8"},on:{click:function(e){t.ishowChange()}}})]),i("view",{staticClass:"shuxing"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品规格")]),i("image",{attrs:{src:"../../static/shangpinshuxing_14.png",mode:"",eventid:"10a01032-9"},on:{click:function(e){t.addGuige()}}})]),t._l(t.guigeList,function(e,a){return i("view",{key:a,staticClass:"guigeList"},[i("text",[t._v(t._s(a+1)+"规格名称:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.productSpecs,expression:"item.productSpecs"}],attrs:{type:"text",placeholder:"请输入名称",eventid:"10a01032-10-"+a},domProps:{value:e.productSpecs},on:{input:function(t){t.target.composing||(e.productSpecs=t.target.value)}}}),i("text",[t._v("价格:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],attrs:{type:"number",placeholder:"请输入价格",eventid:"10a01032-11-"+a},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}})])}),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品单位:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.specUnit,expression:"specUnit"}],attrs:{type:"text",placeholder:"计算单位/斤/个/只/件...",eventid:"10a01032-12"},domProps:{value:t.specUnit},on:{input:function(e){e.target.composing||(t.specUnit=e.target.value)}}})]),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品数量:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.sellCount,expression:"sellCount"}],attrs:{type:"number",placeholder:"商品库存数量",eventid:"10a01032-13"},domProps:{value:t.sellCount},on:{input:function(e){e.target.composing||(t.sellCount=e.target.value)}}})]),i("view",{staticClass:"input_item"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品描述:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.descript,expression:"descript"}],attrs:{type:"text",placeholder:"请输入商品描述",eventid:"10a01032-14"},domProps:{value:t.descript},on:{input:function(e){e.target.composing||(t.descript=e.target.value)}}})]),t.isShowshangj?i("view",{staticClass:"btn"},[t.productId?t._e():i("text",{attrs:{eventid:"10a01032-15"},on:{click:function(e){t.AddProduct()}}},[t._v("立即上架")]),t.productId?i("text",{attrs:{eventid:"10a01032-16"},on:{click:function(e){t.AddProduct2()}}},[t._v("立即修改")]):t._e()]):i("view",{staticClass:"btn_2"},[t.productId?t._e():i("text",[t._v("立即上架")]),t.productId?i("text",[t._v("立即修改")]):t._e()]),t.isshow?i("view",{staticClass:"bottomWindow"},[i("view",{staticClass:"content"},[i("text",[t._v("商品分类")]),i("view",{staticClass:"guige2"},t._l(t.categoryList,function(e,a){return i("text",{key:a,class:{active:t.currentTabs==a},attrs:{eventid:"10a01032-17-"+a},on:{click:function(i){t.categoryChange(a,e.categoryId,e.categoryName)}}},[t._v(t._s(e.categoryName))])})),i("view",{staticClass:"btn2",attrs:{eventid:"10a01032-18"},on:{click:function(e){t.isOk()}}},[t._v("完成")])])]):t._e()],2)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"title"},[i("text",{staticStyle:{width:"150rpx"}},[t._v("商品图片:")]),i("text",[t._v("请上传商品图片")])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},abea:function(t,e,i){"use strict";i.r(e);var a=i("d364"),s=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=s.a},baac:function(t,e,i){"use strict";i("0cb7");var a=o(i("b0ce")),s=o(i("f1f2"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))},cd22:function(t,e,i){},d364:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("2f62"),s=i("a021"),o=i("b607");function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(e){c(t,e,i[e])})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r={data:function(){return{imgURl:"",isShowshangj:!0,isshowBtn:!0,categoryName:"",currentTabs:-1,categoryList:[],productName:"",categoryId:"",descript:"",productImage:[],price:"",sellCount:"",specUnit:"",expressId:0,guigeList:[{productSpecs:"",price:"",specForm:1}],imglist:[],radio2:1,isshow:!1,productId:""}},onLoad:function(t){t.id?(this.productId=t.id,this.getShopProductById(t.id)):this.getProductCategory(1,1),this.imgURl=s.imgURl},computed:n({},(0,a.mapState)(["userId","shopId"])),methods:{getShopProductById:function(t){var e=this;(0,o.getShopProductById)(t).then(function(t){if(0==t.data.code){var i=[],a=!0,s=!1,o=void 0;try{for(var n,c=t.data.data.specList[Symbol.iterator]();!(a=(n=c.next()).done);a=!0){var r=n.value,d={productSpecs:r.productSpecs,price:r.price,specForm:1};i.push(d)}}catch(u){s=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(s)throw o}}e.guigeList=i,e.price=t.data.data.price,e.productName=t.data.data.productName,e.descript=t.data.data.descript,e.categoryId=t.data.data.categoryId,e.sellCount=t.data.data.sellCount,e.specUnit=t.data.data.specUnit,e.expressId=t.data.data.expressId,e.productImage=t.data.data.imgList,e.getProductCategory(1,1)}})},categoryChange:function(t,e,i){this.currentTabs=t,this.categoryId=e,this.categoryName=i},getProductCategory:function(t,e){var i=this;(0,o.getProductCategory)(t,e).then(function(t){if(0==t.data.code){i.categoryList=t.data.data.cateGories;var e=!0,a=!1,s=void 0;try{for(var o,n=t.data.data.cateGories[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var c=o.value;c.categoryId==i.categoryId&&(i.categoryName=c.categoryName)}}catch(r){a=!0,s=r}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}}})},AddProduct:function(){if(this.productName)if(0!=this.productImage.length)if(this.price)if(this.categoryId){for(var e=0;e<this.guigeList.length;e++)""==this.guigeList[e].productSpecs&&this.guigeList.splice(e);if(0!=this.guigeList.length)if(this.specUnit)if(this.sellCount)if(this.descript){var i={userId:this.userId,shopId:this.shopId,productName:this.productName,categoryId:this.categoryId,sellCount:this.sellCount,price:this.price,productImage:this.productImage.join(","),descript:this.descript,specUnit:this.specUnit,expressId:this.expressId,productSpecDtoList:this.guigeList};this.isShowshangj=!1,(0,o.addProduct)(i).then(function(e){0==e.data.code&&t.showToast({title:"添加成功"}),setTimeout(function(e){t.navigateBack({delta:1})},2e3)})}else t.showModal({title:"",content:"请输入商品描述",showCancel:!1});else t.showModal({title:"",content:"请输入商品库存",showCancel:!1});else t.showModal({title:"",content:"请输入商品单位",showCancel:!1});else t.showModal({title:"",content:"请至少上传一种商品规格",showCancel:!1})}else t.showModal({title:"",content:"请选择商品分类属性",showCancel:!1});else t.showModal({title:"",content:"请输入商品价格",showCancel:!1});else t.showModal({title:"",content:"请上传商品图片",showCancel:!1});else t.showModal({title:"",content:"请输入商品名",showCancel:!1})},AddProduct2:function(){if(this.productName)if(this.sellCount)if(this.price)if(this.descript)if(this.specUnit)if(this.categoryId)if(0!=this.productImage.length){for(var e=0;e<this.guigeList.length;e++)""==this.guigeList[e].productSpecs&&this.guigeList.splice(e);var i={productId:this.productId,userId:this.userId,shopId:this.shopId,productName:this.productName,categoryId:this.categoryId,sellCount:this.sellCount,price:this.price,productImage:this.productImage.join(","),descript:this.descript,specUnit:this.specUnit,expressId:this.expressId,productSpecDtoList:this.guigeList};this.isShowshangj=!1,(0,o.updProduct)(i).then(function(e){0==e.data.code&&t.showToast({title:"修改成功"}),setTimeout(function(e){t.navigateBack({delta:1})},2e3)})}else t.showModal({title:"",content:"请上传商品图片",showCancel:!1});else t.showModal({title:"",content:"请选择商品分类",showCancel:!1});else t.showModal({title:"",content:"请输入商品单位",showCancel:!1});else t.showModal({title:"",content:"请输入商品描述",showCancel:!1});else t.showModal({title:"",content:"请输入商品价格",showCancel:!1});else t.showModal({title:"",content:"请输入商品库存",showCancel:!1});else t.showModal({title:"",content:"请输入商品名",showCancel:!1})},addGuige:function(){if(!(this.guigeList.length>5)){var t={productSpecs:"",price:"",specForm:1};this.guigeList.push(t)}},paizhao:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){console.log(i),t.uploadFile({url:s.baseURL+"/file/upload",filePath:i.tempFilePaths[0],name:"file",formData:{user:"test",file:i.tempFilePaths[0]},success:function(i){var a=JSON.parse(i.data);0==a.code&&(console.log(i),e.productImage.push(a.data),t.showToast({title:"上传成功"}))}})}})},paizhao2:function(t){this.productImage.splice(t,1)},radio1Change:function(){0==this.expressId?this.expressId=1:this.expressId=0},radio2Change:function(){1==this.radio2?this.radio2=2:this.radio2=1},ishowChange:function(){this.isshow=!0},isOk:function(){console.log(888),this.isshow=!1}}};e.default=r}).call(this,i("6e42")["default"])},df44:function(t,e,i){"use strict";var a=i("cd22"),s=i.n(a);s.a},f1f2:function(t,e,i){"use strict";i.r(e);var a=i("733e"),s=i("abea");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("df44");var n=i("2877"),c=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"20bb4f40",null);e["default"]=c.exports}},[["baac","common/runtime","common/vendor"]]]);