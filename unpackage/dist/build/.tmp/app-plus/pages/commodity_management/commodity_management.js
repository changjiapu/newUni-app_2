(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity_management/commodity_management"],{1277:function(t,e,o){"use strict";var i=o("c782"),n=o.n(i);n.a},"29dd":function(t,e,o){"use strict";o.r(e);var i=o("a0ed"),n=o("c4be");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);o("1277");var s=o("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"653b219e",null);e["default"]=c.exports},4326:function(t,e,o){"use strict";o("0cb7");var i=a(o("b0ce")),n=a(o("29dd"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},a0ed:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"content"},[o("view",{staticClass:"title"},[o("view",{staticClass:"tianjia",attrs:{eventid:"3281b45c-0"},on:{click:t.gotoAdd}},[o("image",{attrs:{src:"../../static/shangchuandianpu_03.png",mode:""}}),o("text",[t._v("添加商品")])])]),o("view",{staticClass:"product"},[t._l(t.productList,function(e,i){return t.productList.length>0?o("view",{key:i,staticClass:"item"},[o("image",{attrs:{src:t.imgURl+e.imgList[0],mode:""}}),o("text",[t._v(t._s(e.productName))]),1==e.publishStatus?o("text",{staticClass:"shangjia"},[t._v("已上架")]):t._e(),0==e.publishStatus?o("text",{staticClass:"shangjia2"},[t._v("未上架")]):t._e(),o("view",{staticClass:"price"},[o("text",[t._v("￥"+t._s(e.price))]),o("view",{staticClass:"yuan",attrs:{eventid:"3281b45c-1-"+i},on:{click:function(o){t.isShowChange(e.productId)}}},[o("text",{staticClass:"yuandian"}),o("text",{staticClass:"yuandian"}),o("text",{staticClass:"yuandian"})])])]):t._e()}),0==t.productList.length?o("view",{staticClass:"kong"},[o("image",{attrs:{src:"../../static/meiyoudingdan-01.png",mode:""}}),o("text",[t._v("~快去添加商品吧~")])]):t._e()],2),t.isShow?o("view",{staticClass:"zhedang",attrs:{eventid:"3281b45c-6"},on:{click:function(e){e.stopPropagation(),t.isShowChange2()}}},[o("view",{staticClass:"edit"},[o("view",{staticClass:"item",attrs:{eventid:"3281b45c-2"},on:{click:function(e){t.compile()}}},[o("image",{attrs:{src:"../../static/bianji_07.png",mode:""}}),o("text",[t._v("编辑")])]),o("view",{staticClass:"item",attrs:{eventid:"3281b45c-3"},on:{click:t.Delete}},[o("image",{attrs:{src:"../../static/bianji_07.png",mode:""}}),o("text",[t._v("删除")])]),o("view",{staticClass:"item",attrs:{eventid:"3281b45c-4"},on:{click:function(e){t.putaway()}}},[o("image",{attrs:{src:"../../static/bianji_07.png",mode:""}}),o("text",[t._v("上架")])]),o("view",{staticClass:"item",attrs:{eventid:"3281b45c-5"},on:{click:function(e){t.soldOut()}}},[o("image",{attrs:{src:"../../static/bianji_07.png",mode:""}}),o("text",[t._v("下架")])])])]):t._e()])},n=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n})},c4be:function(t,e,o){"use strict";o.r(e);var i=o("fe13"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},c782:function(t,e,o){},fe13:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o("a021"),n=o("b607"),a=o("2f62");function s(t){return u(t)||r(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}function d(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},i=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),i.forEach(function(e){l(t,e,o[e])})}return t}function l(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var h={data:function(){return{shopStatus:-1,imgURl:"",productId:"",productList:[],isShow:!1,pageNo:1,sortWay:0}},onLoad:function(){var e=this,o=t.getStorageSync("userId"),i=t.getStorageSync("token"),n=t.getStorageSync("shopId");o?(this.$store.commit("SET_SHOPID",n),this.$store.commit("SET_USERID",o),this.$store.commit("SET_TOKEN",i)):t.reLaunch({url:"/pages/logn/logn"}),this.version=plus.runtime.version,t.getSystemInfo({success:function(t){console.log(t.platform),"android"==t.platform&&e.AndroidCheckUpdate()}})},onShow:function(){this.shopId&&(this.imgURl=i.imgURl,this.getShopStatusByUserId(this.userId),this.productList=[],this.pageNo=1,this.getProductByShopId(this.pageNo,10,this.shopId,this.sortWay))},onReachBottom:function(){this.pageNo++,this.getProductByShopId(this.pageNo,10,this.shopId,this.sortWay)},computed:d({},(0,a.mapState)(["userId","shopId"])),methods:{AndroidCheckUpdate:function(){var e=this;t.request({url:"http://114.115.211.170:8018/system/version/getNewVersionNumber?type=2",method:"GET",data:{},success:function(o){if(console.log(o.data.data),console.log(e.version),o.data.data>e.version){if(3!=plus.networkinfo.getCurrentType())return void t.showToast({title:"有新的版本发布，检测到您目前非Wifi连接，为节约您的流量，程序已停止自动更新，将在您连接WIFI之后重新检测更新。",mask:!1,duration:7e3,icon:"none"});t.showToast({title:"有新的版本发布，检测到您目前为Wifi连接，程序已启动自动更新。新版本下载完成后将自动弹出安装程序。",mask:!1,duration:7e3,icon:"none"});var i=plus.downloader.createDownload("http://114.115.211.170:8008/app/shanghu.apk",{},function(e,o){200==o?plus.runtime.install(plus.io.convertLocalFileSystemURL(e.filename),{},{},function(e){t.showToast({title:"安装失败",mask:!1,icon:"none",duration:1500})}):t.showToast({title:"更新失败",mask:!1,icon:"none",duration:1500})});i.start()}},fail:function(){},complete:function(){}})},isShowChange2:function(){this.isShow=!1},getShopStatusByUserId:function(t){var e=this;(0,n.getShopStatusByUserId)(t).then(function(t){0==t.data.code&&(e.shopStatus=t.data.data.shopStatus)})},getProductByShopId:function(e,o,i,a){var c=this;(0,n.getProductByShopId)(e,o,i,a).then(function(e){0==e.data.code&&(0==e.data.data.list.length&&t.showToast({title:"没有更多数据了",icon:"none",duration:1e3}),c.productList=[].concat(s(c.productList),s(e.data.data.list)))})},isShowChange:function(t){this.productId=t,this.isShow=!0},compile:function(){this.isShow=!1,t.navigateTo({url:"/pages/addProduct/addProduct?id="+this.productId})},Delete:function(){var e=this;(0,n.delProductById)(this.productId).then(function(o){0==o.data.code&&(t.showToast({title:"删除成功",icon:"none",duration:1e3}),e.productList=[],e.pageNo=1,e.getProductByShopId(e.pageNo,10,e.shopId,e.sortWay))}),this.isShow=!1},putaway:function(){var e=this,o=1;(0,n.shelvesProduct)(this.productId,o).then(function(o){0==o.data.code&&(t.showToast({title:"上架成功",icon:"none",duration:1e3}),e.productList=[],e.pageNo=1,e.getProductByShopId(e.pageNo,10,e.shopId,e.sortWay))}),this.isShow=!1},soldOut:function(){var e=this,o=0;(0,n.shelvesProduct)(this.productId,o).then(function(o){0==o.data.code&&(t.showToast({title:"下架成功",icon:"none",duration:1e3}),e.productList=[],e.pageNo=1,e.getProductByShopId(e.pageNo,10,e.shopId,e.sortWay))}),this.isShow=!1},gotoAdd:function(){-1!=this.shopStatus?0!=this.shopStatus?2!=this.shopStatus?t.navigateTo({url:"/pages/addProduct/addProduct"}):t.showToast({title:"商家入驻驳回，请重新入驻",icon:"none",duration:1e3}):t.showToast({title:"信息审核中",icon:"none",duration:1e3}):t.showToast({title:"请先添加店铺,在申请入驻商家",icon:"none",duration:3e3})}}};e.default=h}).call(this,o("6e42")["default"])}},[["4326","common/runtime","common/vendor"]]]);